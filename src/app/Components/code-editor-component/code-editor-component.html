<!-- <div *ngIf="isLoading" class="loader-container">
  <div class="spinner"></div>
</div> -->
<form [formGroup]="form" class="editor-form">
  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Language</mat-label>
    <mat-select formControlName="language" (selectionChange)="onLanguageChange($event.value)">
      <mat-option *ngFor="let lang of languages" [value]="lang.id">
        {{ lang.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Monaco Editor with FormControl -->
  <app-monaco-editor
    [language]="'javascript'"
    [formControl]="codeControl"
  ></app-monaco-editor>

  <div class="button-row">
    <button mat-raised-button class="run-button" (click)="runCode()">Run</button>
    <button mat-raised-button class="submit-button" (click)="submitCode()">Submit</button>
  </div>
  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Input</mat-label>
    <textarea matInput rows="5" formControlName="input" placeholder="Enter your input here..."></textarea>
  </mat-form-field>
  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Output</mat-label>
    <textarea matInput rows="10" formControlName="output" [disabled]="true"></textarea>
  </mat-form-field>
</form>

<div class="result-panel" *ngIf="testResults.length > 0">
  <h3>Test Case Results:</h3>
  <div class="result-item" *ngFor="let result of testResults; let i = index">
    <span class="test-index">Test {{ i + 1 }}:</span>
    <span [ngClass]="{ pass: result.passed, fail: !result.passed }">
      {{ result.passed ? 'Passed ✅' : result.hasCompileError ? 'Compile Error ❌' : 'Failed ❌' }}
    </span>

    <!-- <div class="output-details" *ngIf="result.hasCompileError">
      <div><strong>Compilation Error:</strong></div>
      <pre>{{ result.compileError }}</pre>
    </div> -->
  </div>
  <div class="output-details" *ngIf="!testResults[0].passed && testResults[0].hasCompileError">
    <div><strong>Compilation Error:</strong></div>
    <pre>{{ testResults[0].compileError }}</pre>
  </div>
</div>

